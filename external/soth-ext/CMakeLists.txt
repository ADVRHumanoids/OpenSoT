#
#  Copyright 2010, 2019 CNRS
#

CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(PROJECT_NAMESPACE stack-of-tasks)
SET(PROJECT_NAME soth)
SET(PROJECT_DESCRIPTION "SOT Hierarchical solver ")
SET(PROJECT_URL "http://github.com/${PROJECT_NAMESPACE}/${PROJECT_NAME}")

INCLUDE(cmake/base.cmake)
INCLUDE(cmake/boost.cmake)
INCLUDE(cmake/eigen.cmake)

# Disable -Werror on Unix for now.
SET(CXX_DISABLE_WERROR True)
SET(CMAKE_VERBOSE_MAKEFILE true)

SET(DOXYGEN_USE_MATHJAX YES)

CMAKE_POLICY(SET CMP0048 OLD)
PROJECT(${PROJECT_NAME} C CXX)

ADD_REQUIRED_DEPENDENCY("eigen3>=3.2.92")
SEARCH_FOR_EIGEN()

SET(BOOST_COMPONENTS program_options)
SEARCH_FOR_BOOST()

INCLUDE_DIRECTORIES(SYSTEM ${Boost_INCLUDE_DIRS})

# Handle OS specificities
INCLUDE(CheckIncludeFiles)
CHECK_INCLUDE_FILES("sys/time.h" SYS_TIME_H)
IF(SYS_TIME_H)
  ADD_DEFINITIONS("-DHAVE_SYS_TIME_H")
ENDIF(SYS_TIME_H)

ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(include/${PROJECT_NAME})
ADD_SUBDIRECTORY(unitTesting)
ADD_SUBDIRECTORY(exe)

PKG_CONFIG_APPEND_LIBS("soth")
